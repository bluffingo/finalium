{% extends "_layout.twig" %}

{% block title %}{{ data.title }}{% endblock %}

{% block head %}
    <script>
        journal_id = '{{ data.int_id }}';
    </script>
{% endblock %}

{% block content %}
	<div class="card">
		<div class="card-body">
			<h1>{{ data.title }}</h1>
			<p>By {{ user_link(data.author) }}, {{ data.published | relative_time }}</p>
			{{ data.contents | markdown_user_written(true) }}
		</div>
	</div>
	<div class="card">
		<div class="card-body">
			<div id="comments">
                {% if is_user_logged_in %}
                    <div>
                        <div>
                        <textarea class="form-control" id="commentContents" style="overflow:hidden;resize:none" rows="3"
                                placeholder="{{ localize('write_comment') }}"></textarea>
                        </div>
                        <div class="right">
                        <button id="post-journal" class="button button-primary" style="margin-bottom:0;">{{ localize('post_action') }}</button>
                        </div>
                    </div>
                {% endif %}
                <div id="comment"></div>
				{% for comment in data.comments %}
					{{ comment(comment) }}
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}